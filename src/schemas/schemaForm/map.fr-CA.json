{
    "schema": "map",
    "title": "Map",
    "type": "object",
    "description": "Core map properties (extent sets, levels of detail)",
    "properties": {
        "extentSets": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "title": "",
                "default": ""
              },
              "spatialReference": {
                "description": "The projection for the given extents",
                "title": "",
                "default": "",
                "type": "object",
                "properties": {
                  "wkid": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "vcsWkid": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "latestWkid": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "latestVcsWkid": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "wkt": {
                    "type": "string",
                    "title": "",
                    "default": ""
                  }
                },
                "additionalProperties": false
              },
              "default": {
                "description": "The default (starting) extent.",
                "title": "Default Extent",
                "default": "",
                "type": "object",
                "properties": {
                  "xmin": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "ymin": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "xmax": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "ymax": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  }
                },
                "required": [
                  "xmin",
                  "ymin",
                  "xmax",
                  "ymax"
                ],
                "additionalProperties": false
              },
              "full": {
                "description": "The full extent (should give good view of the whole map, not necessarily the maximum extent); default will be used if not supplied.",
                "title": "Full Extent",
                "default": "",
                "type": "object",
                "properties": {
                  "xmin": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "ymin": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "xmax": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "ymax": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  }
                },
                "required": [
                  "xmin",
                  "ymin",
                  "xmax",
                  "ymax"
                ],
                "additionalProperties": false
              },
              "maximum": {
                "description": "The maximum extent; full or default extents will be used if not supplied.",
                "title": "Maximum Extent",
                "default": "",
                "type": "object",
                "properties": {
                  "xmin": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "ymin": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "xmax": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  },
                  "ymax": {
                    "type": "number",
                    "title": "",
                    "default": ""
                  }
                },
                "required": [
                  "xmin",
                  "ymin",
                  "xmax",
                  "ymax"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "id",
              "default",
              "spatialReference"
            ],
            "additionalProperties": false,
            "title": "",
            "default": ""
          },
          "description": "The default, full and maximum extents of the map",
          "title": "",
          "default": ""
        },
        "lodSets": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "title": "",
                    "default": ""
                  },
                  "lods": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "level": {
                          "type": "number"
                        },
                        "resolution": {
                          "type": "number"
                        },
                        "scale": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "level",
                        "resolution",
                        "scale"
                      ],
                      "additionalProperties": false
                    },
                    "description": "Level of details for a specific tile schema",
                    "title": "LODs",
                    "default": "[]"
                  }
                },
                "required": [
                  "id",
                  "lods"
                ],
                "additionalProperties": false,
                "title": "",
                "default": ""
              },
              "description": "The levels of detail (zoom scales) available for the map",
              "title": "",
              "default": "[]"
        },
        "tileSchemas": {
          "type": "array",
          "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "A unique id identifying a tile schema (combination of an extent set and a zoom scale)",
                    "title": "",
                    "default": ""
                  },
                  "name": {
                    "type": "string",
                    "description": "The name to display in the basemap selector for the set of basemaps referencing this schema",
                    "title": "",
                    "default": ""
                  },
                  "extentSetId": {
                    "type": "string",
                    "description": "The extent set to be used for this basemap (should reference map.extentSets.id)",
                    "title": "",
                    "default": ""
                  },
                  "lodSetId": {
                    "type": "string",
                    "description": "Optional.  The level of details set to be used for this basemap (should reference map.lod.id)",
                    "title": "",
                    "default": ""
                  }
              },
              "required": [
                "extentSetId",
                "lodSetId",
                "id",
                "name"
              ],
              "additionalProperties": false,
              "title": ""
            },
            "minItems": 1,
            "description": "A unique combination of an LoD and an extent set (each basemap must fit into a tile schema)",
            "title": ""
        },
        "components": {
            "type": "object",
            "properties": {
                "mouseInfo": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "title": "Enabled",
                            "default": true
                        },
                        "spatialReference": {
                            "title": "",
                            "type": "object",
                            "properties": {
                                "wkid": {
                                    "type": "number",
                                    "title": "",
                                    "default": ""
                                },
                                "vcsWkid": {
                                    "type": "number",
                                    "title": "",
                                    "default": ""
                                },
                                "latestWkid": {
                                    "type": "number",
                                    "title": "",
                                    "default": ""
                                },
                                "latestVcsWkid": {
                                    "type": "number",
                                    "title": "",
                                    "default": ""
                                },
                                "wkt": {
                                    "type": "string",
                                    "title": "",
                                    "default": ""
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    "title": "Mouse Coordinates"
                },
                "northArrow": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "title": "Enabled",
                            "default": true
                        }
                    },
                    "title": "North Arrow"
                },
                "overviewMap": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "title": "Enabled",
                            "default": true
                        },
                        "expandFactor": {
                            "type": "number",
                            "default": 2,
                            "title": "Expand Factor"
                        }
                    },
                    "title": "Overview Map"
                },
                "scaleBar": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "title": "Enabled",
                            "default": true
                        },
                        "default": true
                    },
                    "title": "Scale Bar"
                }
            },
            "additionalProperties": false
        },
        "initialBasemapId": {
          "type": "string",
          "description": "Initial basemap to load. If not supplied viewer will select any basemap.",
          "title": "Initial Basemap ID",
          "default": ""
        },
        "baseMaps": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "A unique identifier for the basemap",
                    "title": "Basemap ID",
                    "default": ""
                  },
                  "name": {
                    "type": "string",
                    "description": "Name of the basemap used for labeling",
                    "title": "Name",
                    "default": ""
                  },
                  "description": {
                    "type": "string",
                    "description": "Description of the basemap. Will be visible when basemap selector is expanded.Description of the basemap. Will be visible when basemap selector is expanded.",
                    "title": "Description",
                    "default": ""
                  },
                  "typeSummary": {
                    "type": "string",
                    "description": "Optional base map type. This is descriptive only, and will be shown in the basemap selector.",
                    "title": "Type Summary",
                    "default": ""
                  },
                  "altText": {
                    "type": "string",
                    "description": "Alt text for the basemap thumbnail image.Alt text for the basemap thumbnail image.",
                    "title": "Alternate Text",
                    "default": ""
                  },
                  "thumbnailUrl": {
                    "type": "string",
                    "description": "Path to image file to display in the basemap selector.",
                    "title": "Thumbnail URL",
                    "default": ""
                  },
                  "tileSchemaId": {
                    "type": "string",
                    "description": "The tile schema for this basemap (should reference map.tileSchemas.id)",
                    "title": "Tile Schema ID",
                    "default": ""
                  },
                  "layers": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "default": ""
                        },
                        "layerType": {
                          "type": "string",
                          "default": ""
                        },
                        "url": {
                          "type": "string",
                          "default": ""
                        }
                      },
                      "additionalProperties": false,
                      "required": [
                        "id",
                        "layerType",
                        "url"
                      ]
                    },
                    "minItems": 1,
                    "description": "A set of URLs which should be composited to form a basemap entry",
                    "title": ""
                  },
                  "attribution": {
                    "title": "Attribution",
                    "type": "object",
                    "properties": {
                      "text": {
                        "type": "object",
                        "properties": {
                          "enabled": {
                            "type": "boolean",
                            "default": true,
                            "title": "Enabled"
                          },
                          "value": {
                            "type": "string",
                            "description": "Optional. Contains the attribution value. If empty, it will use copyright text from the server.",
                            "title": "Description",
                            "default": ""
                          }
                        },
                        "required": [
                          "enabled"
                        ],
                        "additionalProperties": false,
                        "title": "Text"
                      },
                      "logo": {
                        "type": "object",
                        "properties": {
                          "enabled": {
                            "type": "boolean",
                            "default": true,
                            "title": "Enabled"
                          },
                          "value": {
                            "type": "string",
                            "description": "URL for the image.",
                            "title": "Alternate Text",
                            "default": ""
                          },
                          "link": {
                            "type": "string",
                            "description": "URL to go to when clicked.",
                            "title": "URL",
                            "default": ""
                          }
                        },
                        "required": [
                          "enabled"
                        ],
                        "additionalProperties": false,
                        "title": "Logo"
                      }
                    },
                    "required": [
                      "text",
                      "logo"
                    ],
                    "additionalProperties": false
                  }
                },
                "required": [
                  "id",
                  "name",
                  "description",
                  "layers",
                  "altText",
                  "tileSchemaId"
                ],
                "additionalProperties": false,
                "title": ""
              },
              "minItems": 1,
              "description": "A list of basemaps to be made available via the basemap selector.",
              "title": "Basemaps Collection"
        },
        "layers": {
            "description": "",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "layerChoice": {
                        "description": "",
                        "type": "string",
                        "enum": ["esriDynamic", "esriFeature", "esriImage", "esriTile", "ogcWms"],
                        "title": "Layer type selector",
                        "default": "esriDynamic",
                        "required": true
                    },
                    "layer_basic": {
                        "description": "",
                        "title": "",
                        "type": "object",
                        "subtype": "oneof",
                        "properties": {
                            "id": {
                                "type": "string",
                                "description": "The id of the layer for referencing within the viewer (does not relate directly to any external service)"
                            },
                            "name": {
                                "type": "string",
                                "description": "The display name of the layer. If it is not present the viewer will make an attempt to scrape this information."
                            },
                            "url": {
                                "type": "string",
                                "description": "The service endpoint of the layer. It should match the type provided in layerType."
                            },
                            "metadataUrl": {
                                "type": "string",
                                "description": "The metadata url of the layer service"
                            },
                            "catalogueUrl": {
                                "type": "string",
                                "description": "The catalogue url of the layer service"
                            },
                            "layerType": {
                                "type": "string",
                                "enum": [ "esriImage", "esriTile" ]
                            },
                            "additionalProperties": false
                        }
                    },
                    "layer_feature": {
                        "description": "",
                        "title": "",
                        "type": "object",
                        "subtype": "oneof",
                        "properties": {
                            "id": {
                                "type": "string",
                                "description": "The id of the layer for referencing within the viewer (does not relate directly to any external service)"
                            },
                            "name": {
                                "type": "string",
                                "description": "The display name of the layer. If it is not present the viewer will make an attempt to scrape this information."
                            },
                            "nameField": {
                                "type": "string",
                                "description": "The display field of the layer. If it is not present the viewer will make an attempt to scrape this information."
                            },
                            "url": {
                                "type": "string",
                                "description": "The service endpoint of the layer. It should match the type provided in layerType."
                            },
                            "metadataUrl": {
                                "type": "string",
                                "description": "The metadata url of the layer service"
                            },
                            "catalogueUrl": {
                                "type": "string",
                                "description": "The catalogue url of the layer service"
                            },
                            "layerType": {
                                "type": "string",
                                "enum": [ "esriFeature" ]
                            },
                            "toggleSymbology": {
                                "type": "boolean",
                                "default": true,
                                "description": "Allows individual symbols to have visibility toggled on/off."
                            },
                            "tolerance": {
                                "type": "number",
                                "default": 5,
                                "description": "Specifies the tolerance in pixels when determining if a feature was clicked. Should be non-negative integer"
                            },
                            "additionalProperties": false
                        }
                    },
                    "layer_dynamic": {
                        "description": "",
                        "title": "",
                        "type": "object",
                        "subtype": "oneof",
                        "properties": {
                            "id": {
                                "type": "string",
                                "description": "The id of the layer for referencing within the viewer (does not relate directly to any external service)"
                            },
                            "name": {
                                "type": "string",
                                "description": "The display name of the layer. If it is not present the viewer will make an attempt to scrape this information."
                            },
                            "url": {
                                "type": "string",
                                "description": "The service endpoint of the layer. It should match the type provided in layerType."
                            },
                            "metadataUrl": {
                                "type": "string",
                                "description": "The metadata url of the layer service"
                            },
                            "catalogueUrl": {
                                "type": "string",
                                "description": "The catalogue url of the layer service"
                            },
                            "layerType": {
                                "type": "string",
                                "enum": [ "esriDynamic" ]
                            },
                            "toggleSymbology": {
                                "type": "boolean",
                                "default": true,
                                "description": "Allows individual symbols to have visibility toggled on/off."
                            },
                            "singleEntryCollapse": {
                                "type": "boolean",
                                "default": false,
                                "description": "Indicates that the dynamic layer with a single layer entry should be rendered without the root group."
                            },
                            "layerEntries": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "index": {
                                            "type": "number",
                                            "description": "The index of the layer in the map service."
                                        },
                                        "name": {
                                            "type": "string",
                                            "description": "A descriptive name for the layer, can override the name coming from the service."
                                        },
                                        "outfields": {
                                            "type": "string",
                                            "default": "*",
                                            "description": "A comma separated list of attribute names that should be requested on query."
                                        },
                                        "stateOnly": {
                                            "type": "boolean",
                                            "default": false,
                                            "description": "A flag indicating this entry is only for state tracking (i.e. it should not be displayed on the UI and all of the controls will be ignored, but the layer itself will be displayed on the map with the given state settings)."
                                        }
                                    },
                                     "minItems": 1
                                }
                            },
                            "tolerance": {
                                "type": "number",
                                "default": 5,
                                "description": "Specifies the tolerance in pixels when determining if a feature was clicked. Should be non-negative integer"
                            },
                            "additionalProperties": false
                        }
                    },
                    "layer_wms": {
                        "description": "",
                        "title": "",
                        "type": "object",
                        "subtype": "oneof",
                        "properties": {
                            "id": {
                                "type": "string",
                                "description": "The id of the layer for referencing within the viewer (does not relate directly to any external service)"
                            },
                            "name": {
                                "type": "string",
                                "description": "The display name of the layer. If it is not present the viewer will make an attempt to scrape this information."
                            },
                            "url": {
                                "type": "string",
                                "description": "The service endpoint of the layer. It should match the type provided in layerType."
                            },
                            "metadataUrl": {
                                "type": "string",
                                "description": "The metadata url of the layer service"
                            },
                            "catalogueUrl": {
                                "type": "string",
                                "description": "The catalogue url of the layer service"
                            },
                            "layerType": {
                                "type": "string",
                                "enum": [ "ogcWms" ]
                            },
                            "layerEntries": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "description": "The id of the layer entry in the WMS"
                                        },
                                        "name": {
                                            "type": "string",
                                            "description": "A descriptive name for the layer.  To be used in the legend."
                                        },
                                        "allStyles": {
                                            "type": "array",
                                            "description": "All the styles for the layer entry in the WMS",
                                            "items": { "type": "string" }
                                        },
                                        "currentStyle": {
                                            "type": "string",
                                            "description": "The current style for the layer entry in the WMS"
                                        }
                                    },
                                     "minItems": 1
                                    }
                            },
                            "featureInfoMimeType": {
                                "type": "string",
                                "enum": [ "text/html;fgpv=summary", "text/html", "text/plain", "application/json" ],
                                "description": "If specified indicates that GetFeatureInfo should be enabled for this WMS and indicates the format that should be requested."
                            },
                            "legendMimeType": {
                                "type": "string",
                                "enum": [ "image/png", "image/gif", "image/jpeg", "image/svg", "image/svg+xml" ],
                                "description": "If specified indicates that GetLegendGraphic should be enabled for this WMS and indicates the format that should be requested.  FIXME check legendUrl for additional requirements"
                            },
                            "additionalProperties": false
                        }
                    }
                }
            }
        }
    },
    "required": ["tileSchemas", "baseMaps"],
    "title": ""
}
